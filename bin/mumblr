#!/usr/bin/env ruby
require 'thor'
require 'mumblr'

class MumblrCLI < Thor
  class_option :blog, desc: 'The "base hostname" or a superset thereof'# .  These are equivalent:
  #    lacecard
  #    http://lacecard.com (if it were a tumblr "custom URL" blog)
  #    http://lacecard.tumblr.com/post/123
  #    http://lacecard.tumblr.com
  # END_DESC
  class_option :type, type: :string
  class_option :count, type: :numeric

  desc "posts <options>", "List blog's contents' URLs"
  def posts
    engine.blog_content(tumblr_params).each { |url| puts url }
  end

  desc "likes <options>", "List blog's likes' contents' URLs"
  def likes
    engine.blog_likes_content.each { |url| puts url }
  end

  private

  def tumblr_params
    { type: options[:type] }
  end


  def engine
    @engine ||= Mumblr.new(options[:blog])
  end
end

MumblrCLI.start(ARGV)

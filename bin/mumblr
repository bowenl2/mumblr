#!/usr/bin/env ruby
require 'thor'
require 'mumblr'

Mumblr.load_database("sqlite://#{File.expand_path('~/mumblr.db')}")

class MumblrCLI < Thor
  class_option :blog, desc: 'The "base hostname" or a superset thereof'# .  These are equivalent:
  #    lacecard
  #    http://lacecard.com (if it were a tumblr "custom URL" blog)
  #    http://lacecard.tumblr.com/post/123
  #    http://lacecard.tumblr.com
  # END_DESC
  class_option :type, type: :string
  class_option :count, type: :numeric
  class_option :download, type: :boolean

  desc "posts <options>", "Enumerate blog's contents' URLs"
  def posts

  end

  desc "likes <options>", "Enumerate blog's likes' contents' URLs"
  def likes

  end

  private

  def tumblr_params
    { type: options[:type] }
  end

  def content_store_base
    File.expand_path('~/mumblr-data')
  end

  def download_blog_contents(options={})
    # TODO
    # was: engine.blog_content(tumblr_params).each { |url| puts url }
  end

  def download_blog_likes_contents(options={})
    # TODO
    # Was: engine.blog_likes_content(tumblr_params).each { |url| puts url }
  end

  def engine
    @engine ||= Mumblr::Engine.new(options[:blog])
  end
end

MumblrCLI.start(ARGV)
